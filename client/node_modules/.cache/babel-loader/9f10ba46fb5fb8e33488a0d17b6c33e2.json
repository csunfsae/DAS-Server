{"ast":null,"code":"import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport { HALF_PI, EPSLN } from '../constants/values';\nexport function init() {\n  //double lat0;                    /* the reference latitude               */\n  //double long0;                   /* the reference longitude              */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n  //the above value can be set with proj4.defs\n  //example: proj4.defs(\"EPSG:2154\",\"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n\n\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0; // Standard Parallels cannot be equal and on opposite sides of the equator\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  } else {\n    this.ns = sin1;\n  }\n\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n} // Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y; // singular cases :\n\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  } else {\n    con = lat * this.ns;\n\n    if (con <= 0) {\n      return null;\n    }\n\n    rh1 = 0;\n  }\n\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n  return p;\n} // Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\n\nexport function inverse(p) {\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = this.rh - (p.y - this.y0) / this.k0;\n\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  } else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n\n  var theta = 0;\n\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * x, con * y);\n  }\n\n  if (rh1 !== 0 || this.ns > 0) {\n    con = 1 / this.ns;\n    ts = Math.pow(rh1 / (this.a * this.f0), con);\n    lat = phi2z(this.e, ts);\n\n    if (lat === -9999) {\n      return null;\n    }\n  } else {\n    lat = -HALF_PI;\n  }\n\n  lon = adjust_lon(theta / this.ns + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\nexport var names = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_1SP\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};","map":{"version":3,"sources":["C:/Users/brand/source/repos/DAS-Server/client/node_modules/proj4/lib/projections/lcc.js"],"names":["msfnz","tsfnz","sign","adjust_lon","phi2z","HALF_PI","EPSLN","init","lat2","lat1","k0","x0","y0","Math","abs","temp","b","a","e","sqrt","sin1","sin","cos1","cos","ms1","ts1","sin2","cos2","ms2","ts2","ts0","lat0","ns","log","isNaN","f0","pow","rh","title","forward","p","lon","x","lat","y","PI","con","ts","rh1","theta","long0","inverse","atan2","names"],"mappings":"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","sourcesContent":["import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n  \n  //double lat0;                    /* the reference latitude               */\n  //double long0;                   /* the reference longitude              */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n  \n  //the above value can be set with proj4.defs\n  //example: proj4.defs(\"EPSG:2154\",\"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\n  \"Lambert Tangential Conformal Conic Projection\",\n  \"Lambert_Conformal_Conic\",\n  \"Lambert_Conformal_Conic_1SP\",\n  \"Lambert_Conformal_Conic_2SP\",\n  \"lcc\"\n];\n\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n"]},"metadata":{},"sourceType":"module"}