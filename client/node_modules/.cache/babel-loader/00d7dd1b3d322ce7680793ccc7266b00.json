{"ast":null,"code":"import { ADD_COORDINATE_TO_GPS_TRACK, UPDATE_CAR_LOCATION, UPDATE_GPS_MAP_CONTAINER_DIMENSIONS, UPDATE_GPS_MAP_SVG_DIMENSIONS, UPDATE_FIRST_LAP } from '../../actions/livePage/gpsActions';\nimport proj4 from 'proj4';\n\nconst initalStartPosition = (latitude, longitude) => {\n  const [x, y] = proj4(\"EPSG:4326\", \"EPSG:3857\", [parseFloat(longitude.toFixed(7)), parseFloat(latitude.toFixed(7))]);\n  return {\n    x: x,\n    y: y\n  };\n};\n\nconst initalState = {\n  gpsTrackCoordinates: [],\n  startLocation: initalStartPosition(34.876530909858, -118.257521724907),\n  carLocation: {\n    x: -118.257521724907,\n    y: 34.876530909858,\n    verticalDisplacement: 0\n  },\n  GPSMapContainerDimensions: {\n    height: 0,\n    width: 0\n  },\n  GPSMapSvgPathDimensions: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  firstLap: true\n};\n\nfunction gpsReducer(state = initalState, action) {\n  switch (action.type) {\n    case ADD_COORDINATE_TO_GPS_TRACK:\n      return { ...state,\n        gpsTrackCoordinates: [...state.gpsTrackCoordinates, action.payload]\n      };\n\n    case UPDATE_CAR_LOCATION:\n      return { ...state,\n        carLocation: action.payload\n      };\n\n    case UPDATE_GPS_MAP_CONTAINER_DIMENSIONS:\n      return { ...state,\n        GPSMapContainerDimensions: action.payload\n      };\n\n    case UPDATE_GPS_MAP_SVG_DIMENSIONS:\n      return { ...state,\n        GPSMapSvgPathDimensions: action.payload\n      };\n\n    case UPDATE_FIRST_LAP:\n      return { ...state,\n        firstLap: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default gpsReducer;","map":{"version":3,"sources":["C:/Users/brand/source/repos/DAS-Server/client/src/reducers/livePage/gpsReducer.js"],"names":["ADD_COORDINATE_TO_GPS_TRACK","UPDATE_CAR_LOCATION","UPDATE_GPS_MAP_CONTAINER_DIMENSIONS","UPDATE_GPS_MAP_SVG_DIMENSIONS","UPDATE_FIRST_LAP","proj4","initalStartPosition","latitude","longitude","x","y","parseFloat","toFixed","initalState","gpsTrackCoordinates","startLocation","carLocation","verticalDisplacement","GPSMapContainerDimensions","height","width","GPSMapSvgPathDimensions","firstLap","gpsReducer","state","action","type","payload"],"mappings":"AAAA,SAAQA,2BAAR,EAAqCC,mBAArC,EAA0DC,mCAA1D,EAA+FC,6BAA/F,EAA8HC,gBAA9H,QAAqJ,mCAArJ;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,mBAAmB,GAAG,CAACC,QAAD,EAAWC,SAAX,KAAyB;AACjD,QAAM,CAACC,CAAD,EAAGC,CAAH,IAAQL,KAAK,CAAC,WAAD,EAAc,WAAd,EAA2B,CAAEM,UAAU,CAACH,SAAS,CAACI,OAAV,CAAkB,CAAlB,CAAD,CAAZ,EAAqCD,UAAU,CAACJ,QAAQ,CAACK,OAAT,CAAiB,CAAjB,CAAD,CAA/C,CAA3B,CAAnB;AAEA,SAAO;AACHH,IAAAA,CAAC,EAAEA,CADA;AAEHC,IAAAA,CAAC,EAAEA;AAFA,GAAP;AAIH,CAPD;;AASA,MAAMG,WAAW,GAAG;AAChBC,EAAAA,mBAAmB,EAAE,EADL;AAEhBC,EAAAA,aAAa,EAAET,mBAAmB,CAAC,eAAD,EAAkB,CAAC,gBAAnB,CAFlB;AAGhBU,EAAAA,WAAW,EAAE;AAACP,IAAAA,CAAC,EAAE,CAAC,gBAAL;AAAuBC,IAAAA,CAAC,EAAE,eAA1B;AAA2CO,IAAAA,oBAAoB,EAAE;AAAjE,GAHG;AAIhBC,EAAAA,yBAAyB,EAAE;AAAEC,IAAAA,MAAM,EAAE,CAAV;AAAaC,IAAAA,KAAK,EAAE;AAApB,GAJX;AAKhBC,EAAAA,uBAAuB,EAAE;AAACZ,IAAAA,CAAC,EAAE,CAAJ;AAAOC,IAAAA,CAAC,EAAE,CAAV;AAAaU,IAAAA,KAAK,EAAE,CAApB;AAAuBD,IAAAA,MAAM,EAAE;AAA/B,GALT;AAMhBG,EAAAA,QAAQ,EAAE;AANM,CAApB;;AASA,SAASC,UAAT,CAAoBC,KAAK,GAAGX,WAA5B,EAAyCY,MAAzC,EAAiD;AAC7C,UAAOA,MAAM,CAACC,IAAd;AAEI,SAAK1B,2BAAL;AACI,aAAO,EACH,GAAGwB,KADA;AAEHV,QAAAA,mBAAmB,EAAE,CAAC,GAAGU,KAAK,CAACV,mBAAV,EAA+BW,MAAM,CAACE,OAAtC;AAFlB,OAAP;;AAKJ,SAAK1B,mBAAL;AACI,aAAO,EACH,GAAGuB,KADA;AAEHR,QAAAA,WAAW,EAAES,MAAM,CAACE;AAFjB,OAAP;;AAKJ,SAAKzB,mCAAL;AACI,aAAO,EACH,GAAGsB,KADA;AAEHN,QAAAA,yBAAyB,EAAEO,MAAM,CAACE;AAF/B,OAAP;;AAKJ,SAAKxB,6BAAL;AACI,aAAO,EACH,GAAGqB,KADA;AAEHH,QAAAA,uBAAuB,EAAEI,MAAM,CAACE;AAF7B,OAAP;;AAKJ,SAAKvB,gBAAL;AACI,aAAO,EACH,GAAGoB,KADA;AAEHF,QAAAA,QAAQ,EAAEG,MAAM,CAACE;AAFd,OAAP;;AAKJ;AACI,aAAOH,KAAP;AAjCR;AAmCH;;AAED,eAAeD,UAAf","sourcesContent":["import {ADD_COORDINATE_TO_GPS_TRACK, UPDATE_CAR_LOCATION, UPDATE_GPS_MAP_CONTAINER_DIMENSIONS, UPDATE_GPS_MAP_SVG_DIMENSIONS, UPDATE_FIRST_LAP} from '../../actions/livePage/gpsActions';\r\nimport proj4 from 'proj4';\r\n\r\nconst initalStartPosition = (latitude, longitude) => {\r\n    const [x,y] = proj4(\"EPSG:4326\", \"EPSG:3857\", [ parseFloat(longitude.toFixed(7)),  parseFloat(latitude.toFixed(7))] );\r\n    \r\n    return {\r\n        x: x,\r\n        y: y\r\n    }\r\n}\r\n\r\nconst initalState = {\r\n    gpsTrackCoordinates: [],\r\n    startLocation: initalStartPosition(34.876530909858, -118.257521724907),\r\n    carLocation: {x: -118.257521724907, y: 34.876530909858, verticalDisplacement: 0},\r\n    GPSMapContainerDimensions: { height: 0, width: 0},\r\n    GPSMapSvgPathDimensions: {x: 0, y: 0, width: 0, height: 0},\r\n    firstLap: true\r\n}\r\n\r\nfunction gpsReducer(state = initalState, action) {\r\n    switch(action.type) {\r\n        \r\n        case ADD_COORDINATE_TO_GPS_TRACK:\r\n            return {\r\n                ...state,\r\n                gpsTrackCoordinates: [...state.gpsTrackCoordinates, action.payload]\r\n            }\r\n\r\n        case UPDATE_CAR_LOCATION:\r\n            return {\r\n                ...state,\r\n                carLocation: action.payload\r\n            }\r\n\r\n        case UPDATE_GPS_MAP_CONTAINER_DIMENSIONS:\r\n            return {\r\n                ...state,\r\n                GPSMapContainerDimensions: action.payload\r\n            }\r\n\r\n        case UPDATE_GPS_MAP_SVG_DIMENSIONS:\r\n            return {\r\n                ...state,\r\n                GPSMapSvgPathDimensions: action.payload\r\n            }\r\n        \r\n        case UPDATE_FIRST_LAP:\r\n            return {\r\n                ...state,\r\n                firstLap: action.payload\r\n            }\r\n\r\n        default: \r\n            return state;\r\n    }\r\n}\r\n\r\nexport default gpsReducer;"]},"metadata":{},"sourceType":"module"}