{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\brand\\\\source\\\\repos\\\\das-server\\\\client\\\\src\\\\components\\\\historyPage\\\\forms\\\\ReviewForm.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateModalStepBackwards, closeModal } from '../../../actions/historyPage/modalActions';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ReviewForm() {\n  _s();\n\n  const allDriveDays = useSelector(state => state.historyModal.driveDays);\n  const selectedDriveDateIndex = useSelector(state => state.historyModal.selectedDriveDateIndex);\n  const selectedDriveDate = useSelector(state => state.historyModal.selectedDriveDate);\n  const sessionNumber = useSelector(state => state.historyModal.selectedSessionNumber);\n  const lapNumber = useSelector(state => state.historyModal.selectedLapNumber);\n  const displayedSessions = useSelector(state => state.historyModal.displayedSessions);\n  const dispatch = useDispatch();\n  const {\n    handleSubmit,\n    errors\n  } = useForm();\n\n  const onSubmit = async data => {\n    const sensorData = await axios.get(`http://localhost:4000/api/v1/data?dates=${selectedDriveDate}&session_numbers=${sessionNumber}&lap_numbers=${lapNumber}&sensors=speeds`);\n    addNewDateToDisplayedSessions(); // console.log(displayedSessions);\n\n    const availableLaps = allDriveDays[selectedDriveDateIndex][\"sessions\"][0][\"laps\"].filter(lap => {\n      return !displayedSessions[selectedDriveDate][\"sessions\"][0][\"laps\"].includes(lap.lap_number);\n    }); // console.log(availableLaps);\n\n    dispatch(closeModal()); // console.log(sensorData.data);\n  };\n\n  const addNewDateToDisplayedSessions = () => {\n    if (!(selectedDriveDate in displayedSessions)) {\n      const newSession = {\n        sessions: [{\n          number: Number(sessionNumber),\n          laps: [Number(lapNumber)]\n        }]\n      };\n      displayedSessions[selectedDriveDate] = newSession;\n      return;\n    }\n\n    addNewSessionToDateSessions();\n  };\n\n  const addNewSessionToDateSessions = () => {\n    const sessionIndex = displayedSessions[selectedDriveDate][\"sessions\"].findIndex(session => session.number == sessionNumber);\n\n    if (sessionIndex === -1) {\n      displayedSessions[selectedDriveDate][\"sessions\"].push({\n        number: Number(sessionNumber),\n        laps: [Number(lapNumber)]\n      });\n      return;\n    }\n\n    addNewLapToDateSessions(sessionIndex);\n  };\n\n  const addNewLapToDateSessions = sessionIndex => {\n    const lapIndex = displayedSessions[selectedDriveDate][\"sessions\"][sessionIndex][\"laps\"].findIndex(lap => lap === Number(lapNumber));\n\n    if (lapIndex === -1) {\n      displayedSessions[selectedDriveDate][\"sessions\"][sessionIndex][\"laps\"].push(Number(lapNumber));\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drive-day-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drive-day__date\",\n          children: [\"Drive Day: \", new Date(selectedDriveDate + \" \").toDateString(\"en-us\")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drive-day__session_number\",\n          children: [\"Session Number: \", sessionNumber]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drive-day__lap_number\",\n          children: [\"Lap Number: \", lapNumber]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => {\n            dispatch(updateModalStepBackwards());\n          },\n          className: \"d-block\",\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          type: \"submit\",\n          className: \"d-block\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ReviewForm, \"+52MUkGsAT6DaEWCMUvomcP+BYw=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useDispatch, useForm];\n});\n\n_c = ReviewForm;\nexport default ReviewForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReviewForm\");","map":{"version":3,"sources":["C:/Users/brand/source/repos/das-server/client/src/components/historyPage/forms/ReviewForm.js"],"names":["React","useForm","useSelector","useDispatch","updateModalStepBackwards","closeModal","axios","ReviewForm","allDriveDays","state","historyModal","driveDays","selectedDriveDateIndex","selectedDriveDate","sessionNumber","selectedSessionNumber","lapNumber","selectedLapNumber","displayedSessions","dispatch","handleSubmit","errors","onSubmit","data","sensorData","get","addNewDateToDisplayedSessions","availableLaps","filter","lap","includes","lap_number","newSession","sessions","number","Number","laps","addNewSessionToDateSessions","sessionIndex","findIndex","session","push","addNewLapToDateSessions","lapIndex","Date","toDateString"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {useForm} from 'react-hook-form';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {updateModalStepBackwards, closeModal} from '../../../actions/historyPage/modalActions';\r\nimport axios from 'axios';\r\n\r\nfunction ReviewForm() {\r\n    const allDriveDays = useSelector( (state) => state.historyModal.driveDays);\r\n    const selectedDriveDateIndex = useSelector( (state) => state.historyModal.selectedDriveDateIndex);\r\n    const selectedDriveDate = useSelector( (state) => state.historyModal.selectedDriveDate);\r\n    const sessionNumber = useSelector( (state) => state.historyModal.selectedSessionNumber);\r\n    const lapNumber = useSelector( (state) => state.historyModal.selectedLapNumber);\r\n    const displayedSessions = useSelector( (state) => state.historyModal.displayedSessions);\r\n    const dispatch = useDispatch();\r\n    const {handleSubmit, errors} = useForm();\r\n\r\n    const onSubmit = async (data) => {\r\n        const sensorData = await axios.get(`http://localhost:4000/api/v1/data?dates=${selectedDriveDate}&session_numbers=${sessionNumber}&lap_numbers=${lapNumber}&sensors=speeds`);\r\n        \r\n        addNewDateToDisplayedSessions();\r\n\r\n        // console.log(displayedSessions);\r\n\r\n        const availableLaps =  allDriveDays[selectedDriveDateIndex][\"sessions\"][0][\"laps\"].filter( (lap) => {\r\n            return !displayedSessions[selectedDriveDate][\"sessions\"][0][\"laps\"].includes(lap.lap_number);\r\n        });\r\n\r\n        // console.log(availableLaps);\r\n\r\n        dispatch(closeModal());\r\n        // console.log(sensorData.data);\r\n    }\r\n\r\n    const addNewDateToDisplayedSessions = () => {\r\n\r\n        if ( !(selectedDriveDate in displayedSessions) ) {\r\n            const newSession = { sessions: [ { number: Number(sessionNumber), laps: [ Number(lapNumber)] } ] }\r\n            displayedSessions[selectedDriveDate] = newSession;\r\n            return\r\n        }\r\n\r\n        addNewSessionToDateSessions();\r\n    }\r\n\r\n    const addNewSessionToDateSessions = () => {\r\n        const sessionIndex = displayedSessions[selectedDriveDate][\"sessions\"].findIndex(session => session.number == sessionNumber);\r\n\r\n        if (sessionIndex === -1) {\r\n            displayedSessions[selectedDriveDate][\"sessions\"].push({ number: Number(sessionNumber), laps: [Number(lapNumber)]});\r\n            return\r\n        }\r\n\r\n        addNewLapToDateSessions(sessionIndex);\r\n    }\r\n\r\n    const addNewLapToDateSessions = (sessionIndex) => {\r\n        const lapIndex = displayedSessions[selectedDriveDate][\"sessions\"][sessionIndex][\"laps\"].findIndex(lap => lap === Number(lapNumber));\r\n       \r\n        if (lapIndex === -1) {\r\n             displayedSessions[selectedDriveDate][\"sessions\"][sessionIndex][\"laps\"].push(Number(lapNumber));\r\n             return\r\n         }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Review</h2>\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"drive-day-data\">\r\n                    <div className=\"drive-day__date\">\r\n                        Drive Day: {new Date(selectedDriveDate + \" \").toDateString(\"en-us\") }\r\n                    </div>\r\n                    <div className=\"drive-day__session_number\">\r\n                        Session Number: {sessionNumber}\r\n                    </div>\r\n                    <div className=\"drive-day__lap_number\">\r\n                        Lap Number: {lapNumber}\r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                    <button type=\"button\" onClick={() => {dispatch(updateModalStepBackwards() )}} className=\"d-block\">Back</button>\r\n                    <button className=\"btn btn-primary\" type=\"submit\" className=\"d-block\">Submit</button>\r\n                </div>\r\n            </form>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default ReviewForm;\r\n"]},"metadata":{},"sourceType":"module"}