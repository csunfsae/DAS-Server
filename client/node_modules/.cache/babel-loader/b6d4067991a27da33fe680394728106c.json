{"ast":null,"code":"function mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n\n  var thing = key ? {} : obj;\n  var out = value.reduce(function (newObj, item) {\n    sExpr(item, newObj);\n    return newObj;\n  }, thing);\n\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n\n  var key = v.shift();\n\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n\n    obj[key] = v[0];\n    return;\n  }\n\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n\n  if (key === 'AXIS') {\n    if (!(key in obj)) {\n      obj[key] = [];\n    }\n\n    obj[key].push(v);\n    return;\n  }\n\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n\n      return;\n\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n\n      return;\n\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n\n    default:\n      i = -1;\n\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n\n      return mapit(obj, key, v);\n  }\n}","map":{"version":3,"sources":["C:/Users/brand/source/repos/DAS-Server/client/node_modules/wkt-parser/process.js"],"names":["mapit","obj","key","value","Array","isArray","unshift","thing","out","reduce","newObj","item","sExpr","v","shift","length","push","i","name","toLowerCase","convert","a","rf"],"mappings":"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","sourcesContent":["\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (key === 'AXIS') {\n    if (!(key in obj)) {\n      obj[key] = [];\n    }\n    obj[key].push(v);\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}