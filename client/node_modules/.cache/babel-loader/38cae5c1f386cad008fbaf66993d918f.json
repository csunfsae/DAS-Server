{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\brand\\\\source\\\\repos\\\\das-server\\\\client\\\\src\\\\components\\\\livePage\\\\LapTimes\\\\LapTimes.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { SocketContext } from '../../../SocketContext';\nimport { updateLapTime, updateLapTimes, updateBestLapTime } from '../../../actions/livePage/lapTimesActions';\nimport './LapTimes.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LapTimes() {\n  _s();\n\n  const socket = useContext(SocketContext);\n  const lap_time = useSelector(state => state.lapTimes.lapTime);\n  const dispatch = useDispatch();\n  const lapCount = useSelector(state => state.lapTimes.lapCount);\n  const lapTimes = useSelector(state => state.lapTimes.lapTimes);\n  const bestLap = useSelector(state => state.lapTimes.bestLapTime);\n  useEffect(() => {\n    socket.on('lap_time', data => {\n      dispatch(updateLapTime(data));\n    });\n  }, []);\n  useEffect(() => {\n    if (lapCount > 1) {\n      dispatch(updateLapTimes(`${lap_time}`));\n    }\n  }, [lapCount]);\n  useEffect(() => {\n    if (lapCount > 1) {\n      getBestLapTime();\n    }\n  }, [lapTimes]);\n\n  function getBestLapTime() {\n    let bestLapTime = lapTimes[0];\n    let bestLapNumber = 1;\n\n    for (let i = 0; i < lapTimes.length; i++) {\n      if (bestLapTime > lapTimes[i]) {\n        bestLapTime = lapTimes[i];\n        bestLapNumber = i + 1;\n      }\n    }\n\n    dispatch(updateBestLapTime({\n      time: bestLapTime,\n      lapNumber: bestLapNumber\n    }));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Lap \", lapCount, \": \", lap_time, \" sec\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: \"red\"\n      },\n      children: [\"Best Lap: \", lapCount === 1 ? `${lap_time} (L1)` : `${bestLap.time} (L${bestLap.lapNumber})`]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: lapTimes.map((lapTime, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"L\", index + 1, \": \", lapTime]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LapTimes, \"Cs8i2wAcEIRcLZYabOJ5w+p+9PM=\", false, function () {\n  return [useSelector, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = LapTimes;\nexport default LapTimes;\n\nvar _c;\n\n$RefreshReg$(_c, \"LapTimes\");","map":{"version":3,"sources":["C:/Users/brand/source/repos/das-server/client/src/components/livePage/LapTimes/LapTimes.js"],"names":["React","useEffect","useContext","useSelector","useDispatch","SocketContext","updateLapTime","updateLapTimes","updateBestLapTime","LapTimes","socket","lap_time","state","lapTimes","lapTime","dispatch","lapCount","bestLap","bestLapTime","on","data","getBestLapTime","bestLapNumber","i","length","time","lapNumber","color","map","index"],"mappings":"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","sourcesContent":["import React, {useEffect, useContext } from 'react';\r\nimport {useSelector, useDispatch} from 'react-redux';\r\nimport {SocketContext} from '../../../SocketContext';\r\nimport {updateLapTime, updateLapTimes, updateBestLapTime} from '../../../actions/livePage/lapTimesActions'\r\n\r\n\r\nimport './LapTimes.css';\r\n\r\nfunction LapTimes () {\r\n    \r\n    const socket = useContext(SocketContext);\r\n    const lap_time = useSelector( (state) => state.lapTimes.lapTime);\r\n    const dispatch = useDispatch();\r\n    const lapCount = useSelector( (state) => state.lapTimes.lapCount);\r\n    const lapTimes = useSelector( (state) => state.lapTimes.lapTimes);\r\n    const bestLap = useSelector( (state) => state.lapTimes.bestLapTime);\r\n\r\n    useEffect( () =>{\r\n        socket.on('lap_time', (data) => {\r\n            dispatch(updateLapTime(data))\r\n          });\r\n    }, [])\r\n\r\n    useEffect( () => {\r\n        if (lapCount > 1) {\r\n            dispatch(updateLapTimes(`${lap_time}`))\r\n        }\r\n    }, [lapCount])\r\n\r\n    useEffect( () => {\r\n        if (lapCount > 1) {\r\n            getBestLapTime();\r\n        }\r\n    }, [lapTimes])\r\n\r\n  function getBestLapTime() {\r\n        let bestLapTime = lapTimes[0];\r\n        let bestLapNumber = 1;\r\n        for (let i = 0; i < lapTimes.length; i++) {\r\n            if (bestLapTime > lapTimes[i]) {\r\n                bestLapTime = lapTimes[i];\r\n                bestLapNumber = i+1;\r\n            }\r\n        }\r\n        dispatch(updateBestLapTime({time: bestLapTime, lapNumber: bestLapNumber}))\r\n  }\r\n\r\n    return (\r\n        <div>\r\n            <h1>    \r\n                Lap {lapCount}: {lap_time} sec  \r\n            </h1>\r\n            <h2 style={{color: \"red\"}}>\r\n                Best Lap: {lapCount === 1 ?  `${lap_time} (L1)` : `${bestLap.time} (L${bestLap.lapNumber})` }\r\n            </h2>\r\n            <h3>\r\n            {lapTimes.map( (lapTime, index) => {\r\n                    return (<div>L{index + 1}: {lapTime}</div> )\r\n                })\r\n            }\r\n            </h3>\r\n        </div>\r\n    );\r\n} \r\n\r\nexport default LapTimes;\r\n"]},"metadata":{},"sourceType":"module"}